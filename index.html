<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Domain Combobox</title>
  </head>
  <body>
    <label for="domainSelector">Select a domain:</label>
    <select id="domainSelector"></select>

    <script>
      /*fetch(
        'https://transferrr.fly.dev/Disoft_RestFul_Api/resources/tayba_test/IntCrossingLightAll',
        {
          method: 'GET',
          "Access-Control-Allow-Origin: *"
         
          headers: {
            'Content-type': 'application/json',
          },
        }
      )*/
      const domainSelector = document.getElementById('domainSelector')
      const proxyUrl = 'http://localhost:3000/proxy'
      const externalUrl =
        'https://secure.disoft-tech.com/Disoft_RestFul_Api/resources/Sawa_Api/S1_Branches?pUName=10921372&pUToken=fvoxk8djufcpez8dus91vacy5dp19jza&pB_Userid=34&pCompanyid=2'

      fetch(`${proxyUrl}?url=${encodeURIComponent(externalUrl)}`)
        .then((response) => response.json())
        .then((domains) => {
          console.log(domains.S_BRANCHESLIST)
          domains.S_BRANCHESLIST.forEach((domain) => {
            console.log(domain)
            const option = document.createElement('option')
            option.value = domain.DB_BRANCH_NAME_AR
            option.text = domain.DB_BRANCH_NAME_AR
            domainSelector.appendChild(option)
          })
        })
        .catch((error) => {
          console.error('Error fetching domain names:', error)
        })

      domainSelector.addEventListener('change', (event) => {
        const selectedDomain = event.target.value
        console.log('Selected domain:', selectedDomain)
      })
    </script>
  </body>
</html>
